# Chapter8. 함수

* 함수의 개념, 함수의 장점을 이해한다.
* 함수를 작성할 수 있고 함수를 호출할 수 있다.
* 함수와 함수 사이에서 정보를 전달하고 받는 메커니즘을 이해한다.

## 8.1 함수란?

### 1. 함수의 개념

```
함수는 프로그램을 구성하는 기본적인 구성 요소
```

* 함수는 서로 연결되어 복잡한 프로그램을 만드는 요소로 쓸 수 있다.
* 함수는 한번 만들어 놓으면 다른 프로그램에서도 사용할 수 있다.
* 함수를 사용하면 가독성이 증대되고, 유지 관리도 쉬워지는 장점이 있다.

#### 1) 함수의 특징

* 함수는 서로 구별되는 이름을 가지고 있다.
* 함수는 특정한 작업을 수행한다.
* 함수는 입력을 받을 수 있고, 수행결과를 반환할 수 있다.

* 함수를 사용할때에는 이름으로 함수를 호출하여 작업시킬 수 있다. 이를 **함수호출(function call)**이라고 한다.

### 2. 함수가 필요한 이유

프로그램에 되풀이 되는 코드들이 있을 때, 매번 같은 코드를 쓰기위해 복사하고 찾는것는 불편하고 비효율적이다.

* 함수는 한번만 작성되면 필요할 때마다 호출하여서 사용할 수 있다.

### 3. 함수의 장점

* 함수를 사용하면 코드가 중복되는 것을 막을 수 있다.
* 한번 작성된 함수는 여러 번 재사용 할 수 있다.
* 함수를 사용하면 전체 프로그램을 모듈로 나눌 수 있어서 개발 과정이 쉬워지고 보다 체계적이 되면서 유지보수도 쉬워진다.

### 4. 함수의 연결

* 함수를 작성한다고 모두 실행되는 것을 아니다. 누군가가 그 함수를 호출하여야 함수가 실행된다.
  * C프로그램은 main()에서 다른 함수들을 호출하여 작업을 하는 구조이다.
    * main은 특별한 함수로서 가장 먼저 자동으로 실행되는 함수이다.

### 5. 함수의 종류

* 함수는 라이브러리 함수와 사용자정의 함수가 있다.

#### 1) 라이브러리 함수

* 컴파일러에서 지원하는 함수로, 프로그래밍을 보다 더 쉽게 할 수 있도록 도와준다.
  * 계산, 문자열 조작, 입/출력 등 수행하는데 필요한 풍부한 함수를 제공한다.

#### 2) 사용자정의 함수

* 프로그래머가 직접 작성하는 함수이다.
  * 라이브러리에 없고, 자신이 필요한 함수라면 프로그래머 자신이 직접 만들어서 사용해야한다.

## 8.2 함수 정의

* 함수는 함수 헤더(function header)와 함수 몸체(function body)로 크게 나눌 수 있다.
  * 함수 헤더는 반환형과 함수이름, 매개 변수 목록을 합쳐서 부른다.
  * 함수 몸체는 함수가 수행하는 작업에 필요한 문장들이 들어간다.

### 1. 반환형

```
함수의 반환형은 함수가 처리를 종료한 후에 호출한 곳으로 반환하는 데이터의 유형을 말한다.
```

* 반환형은 자료형에 따라 char, int, long, double 등이 될 수 있고, 없는 경우 void를 사용한다.

  * 명시하지 않으면 int형을 사용하나 특별한 경우가 아니면 반환형을 생략하면 안된다.

  * 반환값이 있는데 반환하지 않으면 예측 불가능한 값이 전달될 수 있다.
  * 반환값이 없는데 값을 반환하면 문법적인 오류가 발생한다.

* 값을 반환할 떄에는 return 문장을 사용한다.

  ```c
  return (x); //변수 x의 값을 반환
  ```

### 2. 함수 이름

* 식별자의 규칙을 따르면 어떤이름도 가능

  * 소스코드를 읽기 쉽게하기 위해 함수의 기능을 암시하는 이름 사용.

  * 함수의 목적을 설명하는 **동사**또는 **동사+명사**를 사용하면 좋다.

    ```c
    int square() // 정수를 제곱하는 함수
    double compute_average() // 평균을 구하는 함수
    void set_cursor_type() // 커서의 타입을 설정하는 함수
    ```

### 3. 매개 변수

```
외부에서 함수를 호출 할때, 작업에 필요한 데이터 값들을 받는 변수
```

* 매개 변수는 여러개가 될 수 있고, 쉼표로 구분한다.

* 각 매개 변수에 대하여 자료형과 이름을 지정한다.

  * 없는 경우엔 그냥 void를 사용하거나 비워놓는다.

  ```c
  int square(int n) // 정수를 제곱하는 함수
  double compute_average(double x, double y) // 평균을 구하는 함수
  void set_cursor_type(void) // 커서의 타입을 반환하는 함수
  ```

### 4. 함수 몸체

* 함수 몸체는 중괄호로 둘러싸여 있으며, 함수가 수행하는 작업에 필요한 문장들이 들어간다.

* 함수 호출시 순차적으로 실행되며 return문장을 만나면 문장의 실행을 멈추고 호출한 곳으로 되돌아간다.
  * 함수 몸체에 쓸 수 있는 문장에는 아무런 제한이 없다.
    * 함수 내에서 변수를 정의하여 사용하거나, 모든 제어구조들을 사용할 수 있고, 함수안에 다른 함수를 호출하는 것도 가능하다.
    * 함수의 길이의 제한도 없으나 너무 지나치게 길어지면 분할하는 편이 낫다.
      * 기준은 없으나 30행을 넘지 않도록 해야한다.

## 8.3 함수 호출과 반환

### 1. 함수 호출

* 함수를 사용하기 위해서는 함수를 호출하여야 한다. **함수호출은 함수의 이름과 ( )안에 함수가 필요한 데이터를 나열하면 된다.**

| **형식** | 함수(데이터1, 데이터2)                                      |
| -------- | ----------------------------------------------------------- |
| **설명** | 함수가 데이터1, 데이터2 등의 값을 가지고 호출되어 실행된다. |
| **예**   | add(10, 20)                                                 |

* 프로그램 실행 과정
  * 메인함수를 순차적으로 실행
  * 함수를 만나면 함수 호출
  * 함수실행
  * 함수가 끝나면 반환값을 가지고 메인함수로 돌아옴
  * 메인함수 이어서 실행

### 2. 인수와 매개 변수

* 인수(argument)
  * 호출 프로그램에 의하여 함수에 실제로 전달되는 값.
    * 함수가 호출될 때마다 인수는 함수의 매개 변수로 전달된다.
  * 매개 변수와 인수는 개수와 데이터 타입이 정확히 일치하여야한다.
    * 일치하지 않으면 아주 찾기 어려운 오류가 발생한다.

### 3. 반환값

* 반환값(return value)은 함수가 호출한 곳으로 반환하는 작업의 결과값이다.
  
* 인수는 여러개가 있으나 반환값은 하나만 가능하다.
  
* 함수의 반환값은 return 문장 뒤에 있느 수식의 계산값이 된다.

  ```c
  return 0 과 return(0)
  ```

* 반환값의 형은 함수를 기술하였던 반환값의 형과 일치하여야 한다.

* 반환값이 없으면 return 뒤에 아무것도 써주지 않거나 return을 아예 쓰지 않는다.

## 8.4 함수 원형

```
함수를 사용할 때 미리 컴파일러에게 함수에 대한 정보를 알려주는 것.
```

* 함수 원형은 함수가 사용되기 전에 정의 되어야 한다.
  * 함수 원형은 함수 헤더에 세미콜론(;)만을 추가한 것과 똑같다.
  * 변수 이름을 적지 않아도 된다.
* 함수 원형이 미리 주어진다면 함수 정의를 만나기 전에도 함수 호출시, 인수의 유형과 개수가 정확한지, 반환값도 정확하게 사용하고 있는지를 검사할 수 있다.

### 1. 함수 원형을 사용하지 않는 방법

* 함수원형은 컴파일러에게 함수의 정보를 알려주는 목적으로 사용한다. 사용하려는 함수의 정의가 먼저 나오면 구태여 사용할 필요가 없다.
  * 비교적 단순한 프로그램만 가능하고, 항상 함수 원형을 사용하는 것이 가능하다.
    * sub1()함수와 sub2함수가 서로를 호출하면 위치를 바꾸어도 함수원형의 정의 없이는 컴파일이 불가능하다.

### 2. 함수 원형과 헤더 파일

#### 1) 헤더파일

* 주로 함수 원형을 헤더파일에 저장하고 이 헤더파일을 소스에 포함하는 형식으로 사용.
  * 텍스트 에디터로 파일을 편집하고 확장자를 h로 설정하면된다. 그리고 소스파일에서 include를 이용해서 불러들이면 된다.

## 8.5 라이브러리 함수

* 표준 라이브러리 함수는 컴파일러에서 제공하는 함수로서 많은 분야에 걸쳐서 상당한 개수의 함수들을 제공한다.
  * 라이브러리 함수를 사용하려면 먼저 함수 원형을 포함시켜야 한다. 

### 1. 난수 함수

* 난수는 규칙성이 없이 임의로 생성되는 수이다. 난수는 프로그램에서 아주 중요하게 사용된다.
  * 인터넷 뱅킹에서 계좌 이체 명령을 암호화할 때, 주사위나 트럼프 게임 프로그램은 난수를 4사용하고 있다.

##### a) rand()

* 의사 난수 프로그램
  * 초기값에 따라 나오는 순서가 어느 정도 결정되어 있는 난수
  * stdlib.h에 정의되어 있다.

##### b) srand()

* 매번 난수를 다르게 생성하고 싶다면 시드값을 다르게 해야한다.
  * 시드값이 달라지면 이후 생성되는 모든 난수 값이 달라진다.
* 시드값을 다르게 하는 가장 좋은 방법은 time()을 시드값으로 사용하는 것이다.
  * 1970-1-1부터 현재까지 경과된 시간을 초단위로 반환하는 함수

### 2. 유틸리티 함수

* 많이 사용되느 유틸리티 함수에 대하여 정리했다.

| 함수                            | 설명                                                         |
| ------------------------------- | ------------------------------------------------------------ |
| exit(int status)                | exit()를 호출하면 호출 프로세스를 종료시킨다. 프로세서 종료에 앞서서 모든 버퍼들은 비워진다. 보통 1을 인수로 주어서 호출하면 오류가 발생했다는 것을 의미한다. |
| int system(const char *command) | ststem()은 문자열 인수를 운영 체제의 명령어 셀에게 전달하여서 실행시키는 함수이다. 외부에 실행시킬 수 있는 프로그램이 존재하는 경우에 사용할 수 있다. 예를 들어서 DOS명령어인 DIR이나 TYPE, CLS, DEL, MKDIR와 같은 명령어 들을 실행시킬 수 있다. 이 함수는 운영체제에 의존적이다. |

### 3. 수학 함수

* 수학 함수들의 원형은 math.h에 있다. 수학 함수는 double형의 매개 변수와 반환값을 가진다.

| 분류       | 함수                           | 설명                                 |
| ---------- | ------------------------------ | ------------------------------------ |
| 삼각함수   | double sin(double x)           | 사인값 계산                          |
|            | double cos(double x)           | 코사인값 계산                        |
|            | double tan(double x)           | 탄젠트값 계산                        |
| 역삼각함수 | double acos(double x)          | 역코사인값 계산 결과값 범위[0, π]    |
|            | double asin(double x)          | 역사인값 계산 결과값 범위[-π/2, π]   |
|            | double atan(double x)          | 역탄젠트값 계산 결과값 범위[-π/2, π] |
| 쌍곡선함수 | double cosh(double x)          | 쌍곡선 코사인                        |
|            | double sinh(double x)          | 쌍곡선 사인                          |
|            | double tanh(double x)          | 쌍곡선 탄젠트                        |
| 지수함수   | doyble exp(double x)           | e의 x승                              |
|            | double log(double x)           | 로그 e의 x                           |
|            | double log10(double x)         | 로그10의 x                           |
| 기타함수   | double ceil(double x)          | x보다 작지 않은 가장 작은 정수       |
|            | double floor(double x)         | x보다 크지 않은 가장 큰 정수         |
|            | double fabs(double x)          | 실수 x의 절대값                      |
|            | int abs(int x)                 | 정수 x의 절대값                      |
|            | double pow(double x, double y) | x의 y승                              |
|            | double sqrt(double x)          | 루트 x                               |

## 8.6 함수를 사용하는 이유

* 소스 코드의 중복성을 없애준다.
  
  * 중복성을 줄여 소스 코드의 양을 줄일 수 있다.
  
* 한번 제작된 함수는 다른 프로그램을 제작할 때도 사용이 가능하다.
  
  * 텍스트 에디터로 복사 붙여넣기 하면 된다.
    * extern으로 외부 함수를 연결할 수 있다.
  
* 복합한 문제를 단순한 부분으로 분해할 수 있다.

  * 모듈화.

* **함수의 부수 작용**(side effect)

  ```
  어떤 값을 반환하지는 않지만 함수가 실행한 다음 프로그램에 변화가 발생하는것
  ```

  * 함수는 기본적으로 데이터를 받아서 어떤 연산을 하여 그 결과값은 반환하는 도중 어떤 부수작용을 가질 수 있다.
    * 외부로부터 데이터를 받는 것, 모니터나 파일로 데이터를 내보내는 것, 전역 변수의 값을 변경시키는 것 등이 부수 작용의 일종이다.



