# 파일과 디렉토리 검색하기

### 학습 목표 및 학습 내용

#### 1) 학습 목표

* 파일의 내용을 검색하는 방법을 익힌다.
* 조건에 맞는 파일과 디렉토리를 찾는 방법을 익힌다.
* 명령이 있는 위치를 찾는 방법을 익힌다.

#### 2) 학습 내용

* 파일 내용 검색 : grep/egrep
* 파일 검색 : find
* 명령 검색 : which

## 01. 파일 내용 검색 - grep

* **glogal regular expression print**

```bash
grep [ 옵션 ] 패턴 파일명들
ex) grep -i unix grep.dat
```

* 지정한 파일에 특정 문자열(패턴)이 들어있는지 검색
* 패턴
  * 문자, 문자열, 문장, 정규표현식(regular expression)
* 옵션
  * -i : 대소문자를 무시하고 검색
  * -l : 해당 패턴이 들어있는 파일 이름을 출력
  * -n : 각 라인의 번호도 함께 출력
  * -v : 명시된 패턴과 일치하지 않는 줄을 출력
  * -c : 패턴과 일치하는 라인수 출력
  * -w : 패턴이 하나의 단어로 된 것만 검색

### 2. 정규 표현식

* **특정한 규칙을 가진 문자열의 집합을 표현하는데 사용하는 형식 언어**
  * 앵커( Anchor) : 검색시 한 줄에서 패턴의 위치를 표현
  * 문자 집합(Character Set) : 하나이상의 문자들을 표현(알파벳, 숫자, ..[]..)
  * 변환자(Modifier) : 이전 문자 집합의 반복횟수 지정

#### 1) 특수문자

| 문자 | 의미                            | 예           | 결과                                             |
| ---- | ------------------------------- | ------------ | ------------------------------------------------ |
| ^    | 라인의 시작                     | '^문자열'    | 문자열로 시작하는 모든 행                        |
| $    | 라인의 끝                       | '문자열$'    | 문자열로 끝나는 모든 행                          |
| .    | 한글자                          | 'a...b'      | 한글자 대응, a로 시작해서 b로 끝나는 5글자 검색  |
| [ ]  | 괄호안의 글자중 하나            | '[Pp]attern' | Pattern 또는 pattern이 나타나는 라인 검색        |
| [^]  | 괄호 안에 있는 글자가 아닌 글자 | '\[^a-m]att' | att앞에 a부터 m까지 나오지 않는 라인 검색        |
| *    | 앞의 항목이 없거나 여러 번 반복 | 'ab*'        | a다음에 b가 없거나 반복적으로 나타나는 라인 검색 |

### 3. egrep

* **extended regular expression**을 사용하는 grep 명령

```
egrep [ 옵션 ] 패턴 파일명들
```

* 확장된 패턴 표현식 특수 문자

  | 메타문자 | 의미                         | 예              | 결과                |
  | -------- | ---------------------------- | --------------- | ------------------- |
  | +        | 앞의 글자가 하나 이상 나온다 | '[a-z]+ark'     | airpark, dark...    |
  | ?        | 없거나 한번 반복             | 'unix[0-9]?'    | unix1, unix2...     |
  | x\|y     | x나 y중 하나가 나온다.       | 'apple\|orange' | apple or orange     |
  | (\|)     | 문자열 그룹                  | '(1\|2)+'       | 1또는 2가 하나 이상 |

### 4. grep과 파이프( | )

* grep 명령은 파이프와 함께 자주 사용됨

  * 표준출력을 표준입력으로 연결함

    ```
    ex)
    ls -l | grep 'rw-'
    ps -ef | grep 'hb20171655'
    ```

### 5. find

* 사용자가 시스템 내의 존재하는 특정 파일을 찾을 때 사용

```
 find 경로 검색조건 [ 동작 ]
```

* 경로
  * 파일을 찾을 디렉토리의 절대, 또는 상대 경로
* 검색조건
  * 파일을 찾기 위한 경로

### 6. 검색조건

| 검색조건표현 | 의미 | 기능 |
| ------------ | ---- | ---- |
|              |      |      |
|              |      |      |
|              |      |      |
|              |      |      |
|              |      |      |
|              |      |      |

### 7. 동작

| 동작               | 정의 |
| ------------------ | ---- |
| -exec  명령 {} \\; |      |
|                    |      |
|                    |      |

### 8. find 사용 예

#### 1) 검색조건

* -name : 이름이 grep.dat 인 파일 찾기
* -type 
* -mtime
* -newer
* -user
* -perm
* -type
  * -a (and) : 결합 조건을 생략하면 자동으로 and 처리
  * -o (or) : 둘다 대상인 경우
  * ! (not)

##### a) 검색된 파일 처리

* -exec : 이후에 지정한 명령 수행

### 9. which

* 명령어 파일의 위치를 찾아서 그 경로나 앨리어스를 출력

```
which 명령
```

* PATH 환경 변수로 지정된 경로에서 파일 찾음